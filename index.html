<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
  /* General page layout */
body {
  font-family: Arial, sans-serif;
  background: #3c3434;
  color: #dcdcdc;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 30px;
}

/* Headings */
h3,h2,h1 {
  margin: 10px 0;
  font-weight: 600;
}


#timer {
  font-size: 2rem;
  font-weight: bold;
  color: #0077cc;
  margin: 10px 0;
}

/* Sentence display */
#sentence {
  font-size: 1.3rem;
  margin: 20px 0;
  padding: 10px 15px;
  background: #fff;
  border: 2px solid #ddd;
  border-radius: 6px;
  min-height: 50px;
  width: 80%;
  max-width: 700px;
  text-align: left;
}

/* Correct / Remaining / Error highlighting */
#sentence span.correct {
  color: #222;
  font-weight: bold;
}
#sentence span.remaining {
  color: #aaa;
}
#sentence span.error {
  color: #d9534f;
  font-weight: bold;
}

/* Letter count */
#lcount {
  margin: 10px 0;
  font-size: 1rem;
  color: #c4c4c4;
}

/* Result text */
#result {
  margin: 15px 0;
  font-size: 1.1rem;
  color: #c4c4c4;
}

/* Textarea */
textarea {
  width: 80%;
  max-width: 700px;
  height: 120px;
  font-size: 16px;
  padding: 12px;
  border: 2px solid #ccc;
  border-radius: 6px;
  resize: none;
  outline: none;
  transition: border-color 0.3s;
}
textarea:focus {
  border-color: #0077cc;
  background: #fdfdfd;
}

/* Shuffle button */
#shuffle,#reset {
  margin-top: 15px;
  padding: 10px 20px;
  font-size: 1rem;

  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.3s;
}
#shuffle{
  background: #0077cc;
  color: white;
}
#reset{
  background: #c4c4c4;
  color: rgb(0, 0, 0);
}
#shuffle:hover {
  background: #005fa3;
}
#reset:hover {
  background: #5d5d5d;
}

  </style>

</head>
<body>

    <h1>üíª‚ú® Ôº¥ è·¥ò·¥á  Ôº≠·¥Ä·¥Ö…¥·¥áss ‚ú®üíª</h1>
    <h2>Countdown Timer</h2>

    <h5 id="timer">10</h5>
    <h3 id="sentence">hello, world!</h3>
    <h3 id="lcount"></h3>
    <p id="result"></p>

    <textarea id="text" placeholder="Start typing here..." autocomplete="off" autocorrect="off" autofocus></textarea>
    <button id="shuffle">Shuffle</button>
    <button id="reset">Reset</button>
  <script>
    let countdown = null;
    async function _SetTimer(){
        countdown = null;
             countdown = setInterval(() => {
      timeLeft--;
      timerElement.textContent = timeLeft;

      if (timeLeft <= 0) {
        clearInterval(countdown);
        timerElement.textContent = "Time's up!";
      }
    }, 1000); // runs every 1 second
    }
    const TIMER = 10;
    let current_t = 10;
    let timeLeft = TIMER;
    const timerElement = document.getElementById("timer");
    
    const paragraphs = [
  { timer: 30, text: "The sun dipped below the horizon, painting the sky in shades of orange and purple." },
  { timer: 30, text: "A gentle breeze carried the scent of jasmine through the quiet streets." },
  { timer: 35, text: "She opened the old book, its pages yellowed with time and filled with forgotten stories." },
  { timer: 30, text: "The city buzzed with life, neon lights flickering against the night sky." },
  { timer: 35, text: "Raindrops tapped softly against the window, a lullaby for the restless mind." },
  { timer: 35, text: "He walked along the shore, leaving footprints that the waves quickly erased." },
  { timer: 30, text: "The mountain stood tall and silent, a guardian of the valley below." },
  { timer: 30, text: "Children's laughter echoed in the park, mingling with the chirping of birds." },
  { timer: 30, text: "The clock ticked steadily, marking the passage of moments too easily lost." },
  { timer: 30, text: "She sipped her tea slowly, savoring the warmth that spread through her hands." },
  { timer: 45, text: "The library smelled of paper and ink, a sanctuary for curious souls." },
  { timer: 50, text: "Stars scattered across the sky like diamonds on a velvet canvas." },
  { timer: 20, text: "He adjusted his glasses, focusing on the puzzle that refused to be solved." },
  { timer: 60, text: "The marketplace was alive with colors, sounds, and the aroma of spices." },
  { timer: 30, text: "A cat stretched lazily in the sunbeam, purring with contentment." },
  { timer: 30, text: "The train rumbled forward, carrying dreams and strangers alike." },
  { timer: 30, text: "She traced her finger along the map, imagining journeys yet to come." },
  { timer: 30, text: "The fire crackled in the hearth, casting dancing shadows on the walls." },
  { timer: 30, text: "He paused at the crossroads, uncertain which path would lead him home." },
  { timer: 30, text: "The garden bloomed in a riot of colors, a celebration of spring's return." }
];


       const text = document.getElementById("text");
    const senElement = document.getElementById("sentence");
    let target = senElement.textContent; // original sentence
    const lcount = document.getElementById("lcount");
    const shuffle = document.getElementById("shuffle");
     const reset = document.getElementById("reset");
    shuffle.addEventListener("click",async ()=>{
     
        const randomIndex = Math.floor(Math.random() * paragraphs.length);

// Get the random element
        const randomItem = paragraphs[randomIndex];


        target = randomItem.text;
         senElement.innerHTML =
          `<span class="remaining">${target}</span>`;
          lcount.textContent = `0/${target.length}`;
         clearInterval(countdown);
      
         
        timeLeft = randomItem.timer +1;
        current_t = randomItem.timer;
          await _SetTimer();
        text.value ="";
        startTime = Date.now();

      
    });
    reset.addEventListener("click",async ()=>{
             
         senElement.innerHTML =
          `<span class="remaining">${target}</span>`;
          lcount.textContent = `0/${target.length}`;
         clearInterval(countdown);
        await _SetTimer();
          text.value ="";
        timeLeft = current_t+1;
       
        
       
        startTime = Date.now();
    });


    window.addEventListener("DOMContentLoaded",()=>{
        senElement.innerHTML =
          `<span class="remaining">${target}</span>`;
          lcount.textContent = `0/${target.length}`;
          _SetTimer();

    });
    
    const result = document.getElementById("result");

    let startTime = null;

    text.addEventListener("input", async () => {
      const typed = text.value;

      if (target.startsWith(typed)) {

        

        // Correct so far
        const correctPart = typed;
        const remainingPart = target.slice(typed.length);

        senElement.innerHTML =
          `<span class="correct">${correctPart}</span><span class="remaining">${remainingPart}</span>`;

        text.style.color = "black";
         lcount.textContent = `${typed.length}/${target.length}`;

          if (!startTime) {
        startTime = Date.now();
      }

      // If user finished typing the sentence
      if (text.value === document.getElementById("sentence").textContent) {
        const endTime = Date.now();
        const elapsedSeconds = (endTime - startTime) / 1000;

        // Count words
        const wordCount = text.value.trim().split(/\s+/).length;

        // Calculate words per second
        const wps = (wordCount / elapsedSeconds).toFixed(2);

     

        if(confirm(`You typed ${wordCount} words in ${elapsedSeconds.toFixed(2)} seconds ‚Üí ${wps} words per second.
Do you want to start new round?`)){
            
            senElement.innerHTML =
          `<span class="remaining">${target}</span>`;
          lcount.textContent = `0/${target.length}`;


        clearInterval(countdown);
        timeLeft =current_t+1;
        await _SetTimer();
        text.value ="";

        startTime = null;
        if (!startTime) {
        startTime = Date.now();

      }

        }
        else{
               result.textContent = `You typed ${wordCount} words in ${elapsedSeconds.toFixed(2)} seconds ‚Üí ${wps} words per second`;
              
               clearInterval(countdown);
        }
        
      }
      } else {
        // Mistake
        senElement.innerHTML =
          `<span class="error">${target}</span>`;
        text.style.color = "red";
      }

      
    });
 
 

  </script>


</body>
</html>
